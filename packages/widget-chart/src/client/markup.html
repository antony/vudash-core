<div class="vudash-chart">
  <div ref:chart class="value">
  </div>
  <div class="label">
    {{ config.description }}
  </div>
</div>

<style>
  .value {
    width: 100%;
    height: 80%;
  }

  .ct-label.ct-horizontal,
  .ct-label.ct-vertical,
  .ct-grids > .ct-grid.ct-horizontal,
  .ct-grids > .ct-grid.ct-vertical {
    color: dimgrey;
    stroke: dimgrey;
  }
</style>

<script>
  import Chartist from 'chartist'
  import 'chartist/dist/chartist.css'
  import ChartOptions from './chart-options'

  export default {
    data () {
      return {
        series: [
          [12, 9, 7, 8, 5],
          [2, 1, 3.5, 7, 3],
          [1, 3, 4, 5, 6]
        ]
      }
    },

    oncreate () {
      const config = this.get('config')

      const { constructorName, options } = ChartOptions.get(config.type)
      const chartConfig = Object.assign({ fullWidth: true }, options)
      const ChartConstructor = Chartist[constructorName]

      this.chart = new ChartConstructor(this.refs.chart, {
        labels: config.labels,
        series: this.get('series')
      }, chartConfig)
    },

    methods: {
      update (data) {
        this.set({ series: data })
      }
    }
  }
</script>